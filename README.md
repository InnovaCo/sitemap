# Генератор sitemap.xml [![Build Status](https://travis-ci.org/InnovaCo/sitemap.svg?branch=master)](https://travis-ci.org/InnovaCo/sitemap)

Автоматически генерирует файл `sitemap.xml` на основе файловой структуры. Также понимает вложенные `sitemap.xml` и импортирует данные из него, автоматически обновляя ссылки в этом файле.

Пример использования:

```js
var sitemap = require('sitemap');

sitemap('./htdocs', function(err, sm) {
    if (err) {
        return console.error(sm);
    }

    // пройдёмся по всем ссылкам карты сайта
    sm.items.forEach(function(item) {
        console.log(item.url);
    });
    
    // вывод карты сайта в виде XML
    var fs = require('fs');
    fs.writeFile('./sitemap.xml', sm.toXml(), function(err) {
        console.log('Done!');
    });
});
```

## Аргументы

* `dir` (String): путь к папке, которую нужно просканировать и из которой нужно создать карту сайта.
* `options` (Object): необязательный параметр; список опций для генератора.
    * `prefix`: префикс, который нужно добавить всем сгенерированным ссылкам.
    * `ext`: массив с расширениями файлов, которые нужно добавить в карту сайта. По умолчанию `['.html', '.htm']`.
    * `index`: массив индексных файлов. Сам индексный файл не попапдает в карту сайта, вместо него добавляется родительская папка. По умолчанию `['index.html', 'index.htm']`.
    * `lastModified`: булевое значаение, означающее, стоит ли записать дату последнего изменения файла в карту сайта. По умолчанию `true`.
    * `includeSitemap`: булевое значение, означающее, стоит ли включать содержимое вложенных файлов `sitemap.xml` в генерируемую карту сайта. Этот параметр меняет алгоритм сканирования директорий (см. ниже). По умолчанию `true`.
* `callback` (Function): функция, вызываемая после генерации карты сайта. Принимает два аргумента: `error` и `sitemap` — объект со структурой сайта.